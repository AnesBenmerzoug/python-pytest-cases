



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.3">
    
    
      
        <title>API reference - pytest_cases</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#api-reference" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="pytest_cases" aria-label="pytest_cases" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              pytest_cases
            </span>
            <span class="md-header-nav__topic">
              
                API reference
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/smarie/python-pytest-cases/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="pytest_cases" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    pytest_cases
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/smarie/python-pytest-cases/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Usage details
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Usage details
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../usage/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../usage/basics/" title="Basics" class="md-nav__link">
      Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../usage/intermediate/" title="Intermediate" class="md-nav__link">
      Intermediate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../usage/advanced/" title="Advanced" class="md-nav__link">
      Advanced
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        API reference
      </label>
    
    <a href="./" title="API reference" class="md-nav__link md-nav__link--active">
      API reference
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-on-case-functions-side" class="md-nav__link">
    1 - On case functions side
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#casedata-type-hint" class="md-nav__link">
    CaseData type hint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case_name" class="md-nav__link">
    @case_name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case_tags" class="md-nav__link">
    @case_tags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test_target" class="md-nav__link">
    @test_target
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cases_generator" class="md-nav__link">
    @cases_generator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiplestepscasedata-type-hint" class="md-nav__link">
    MultipleStepsCaseData type hint
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-on-test-functions-side" class="md-nav__link">
    2 - On test functions side
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cases_fixture" class="md-nav__link">
    @cases_fixture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cases_data" class="md-nav__link">
    @cases_data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#casedatagetter" class="md-nav__link">
    CaseDataGetter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unfold_expected_err" class="md-nav__link">
    unfold_expected_err
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_all_cases" class="md-nav__link">
    get_all_cases
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-pytest-goodies" class="md-nav__link">
    3 - Pytest goodies
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fixture_plus" class="md-nav__link">
    @fixture_plus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unpack_fixture" class="md-nav__link">
    unpack_fixture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fixture_union" class="md-nav__link">
    fixture_union
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#param_fixtures" class="md-nav__link">
    param_fixtures
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#param_fixture" class="md-nav__link">
    param_fixture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametrize_plus" class="md-nav__link">
    @parametrize_plus
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-on-case-functions-side" class="md-nav__link">
    1 - On case functions side
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#casedata-type-hint" class="md-nav__link">
    CaseData type hint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case_name" class="md-nav__link">
    @case_name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case_tags" class="md-nav__link">
    @case_tags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test_target" class="md-nav__link">
    @test_target
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cases_generator" class="md-nav__link">
    @cases_generator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiplestepscasedata-type-hint" class="md-nav__link">
    MultipleStepsCaseData type hint
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-on-test-functions-side" class="md-nav__link">
    2 - On test functions side
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cases_fixture" class="md-nav__link">
    @cases_fixture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cases_data" class="md-nav__link">
    @cases_data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#casedatagetter" class="md-nav__link">
    CaseDataGetter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unfold_expected_err" class="md-nav__link">
    unfold_expected_err
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_all_cases" class="md-nav__link">
    get_all_cases
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-pytest-goodies" class="md-nav__link">
    3 - Pytest goodies
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fixture_plus" class="md-nav__link">
    @fixture_plus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unpack_fixture" class="md-nav__link">
    unpack_fixture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fixture_union" class="md-nav__link">
    fixture_union
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#param_fixtures" class="md-nav__link">
    param_fixtures
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#param_fixture" class="md-nav__link">
    param_fixture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametrize_plus" class="md-nav__link">
    @parametrize_plus
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/smarie/python-pytest-cases/edit/master/docs/api_reference.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="api-reference">API reference<a class="headerlink" href="#api-reference" title="Permanent link">&para;</a></h1>
<p>In general, using <code>help(symbol)</code> is the recommended way to get the latest documentation. In addition, this page provides an overview of the various elements in this package.</p>
<h2 id="1-on-case-functions-side">1 - On case functions side<a class="headerlink" href="#1-on-case-functions-side" title="Permanent link">&para;</a></h2>
<h3 id="casedata-type-hint"><code>CaseData</code> type hint<a class="headerlink" href="#casedata-type-hint" title="Permanent link">&para;</a></h3>
<p>A proposed standard type hint for the case functions outputs. <code>CaseData = Tuple[Given, ExpectedNormal, ExpectedError]</code> where </p>
<div class="codehilite"><pre><span></span><code><span class="n">Given</span> <span class="o">=</span> <span class="n">Any</span>
<span class="sd">&quot;&quot;&quot;The input(s) for the test. It can be anything&quot;&quot;&quot;</span>

<span class="n">ExpectedNormal</span> <span class="o">=</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span>
<span class="sd">&quot;&quot;&quot;The expected test results in case success is expected, or None if this test</span>
<span class="sd"> should fail&quot;&quot;&quot;</span>

<span class="n">ExpectedError</span> <span class="o">=</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="ne">Exception</span><span class="p">],</span> 
                               <span class="ne">Exception</span><span class="p">,</span> 
                               <span class="n">Callable</span><span class="p">[[</span><span class="ne">Exception</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]]]]</span>
<span class="sd">&quot;&quot;&quot;The expected error in case failure is expected, or None if the test should </span>
<span class="sd">succeed. It is proposed that expected error can be defined as an exception </span>
<span class="sd">type, an exception instance, or an exception validation function&quot;&quot;&quot;</span>
</code></pre></div>


<h3 id="case_name"><code>@case_name</code><a class="headerlink" href="#case_name" title="Permanent link">&para;</a></h3>
<p><code>@case_name(name: str)</code></p>
<p>Decorator to override the name of a case function. The new name will be used instead of the function name, in test names.</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@case_name</span><span class="p">(</span><span class="s1">&#39;simple_case&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">case_simple</span><span class="p">():</span>
    <span class="o">...</span>
</code></pre></div>


<h3 id="case_tags"><code>@case_tags</code><a class="headerlink" href="#case_tags" title="Permanent link">&para;</a></h3>
<p><code>@case_tags(*tags: Any)</code></p>
<p>Decorator to tag a case function with a list of tags. These tags can then be used in the <code>@cases_data</code> test function decorator to filter cases within the selected module(s).</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>tags</code>: a list of tags that may be used to filter the case. Tags can be anything (string, objects, types, functions...)</li>
</ul>
<h3 id="test_target"><code>@test_target</code><a class="headerlink" href="#test_target" title="Permanent link">&para;</a></h3>
<p><code>@test_target(target: Any)</code></p>
<p>A simple decorator to declare that a case function is associated with a particular target.</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@test_target</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">case_to_test_int</span><span class="p">():</span>
    <span class="o">...</span>
</code></pre></div>


<p>This is actually an alias for <code>@case_tags(target)</code>, that some users may find a bit more readable.</p>
<h3 id="cases_generator"><code>@cases_generator</code><a class="headerlink" href="#cases_generator" title="Permanent link">&para;</a></h3>
<p><code>@cases_generator(name_template: str, lru_cache: bool=False, **param_ranges)</code></p>
<p>Decorator to declare a case function as being a cases generator. <code>param_ranges</code>  should be a named list of parameter ranges to explore to generate the cases.</p>
<p>The decorator will use <code>itertools.product</code> to create a cartesian product of the named parameter ranges, and create a case for each combination. When the case function will be called for a given combination, the corresponding parameters will be passed to the decorated function.</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@cases_generator</span><span class="p">(</span><span class="s2">&quot;test with i=</span><span class="si">{i}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">case_10_times</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Generates 10 cases &#39;&#39;&#39;</span>
    <span class="n">ins</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">outs</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">2</span>
    <span class="k">return</span> <span class="n">ins</span><span class="p">,</span> <span class="n">outs</span><span class="p">,</span> <span class="kc">None</span>
</code></pre></div>


<p><strong>Parameters:</strong></p>
<ul>
<li><code>name_template</code>: a name template, that will be transformed into the case name using <code>name_template.format(**params)</code> for each case, where params is the dictionary of parameter values for this generated case.</li>
<li><code>lru_cache</code>: a boolean (default False) indicating if the generated cases should be cached. This is identical to decorating the function with an additional <code>@lru_cache(maxsize=n)</code> where n is the total number of generated cases.</li>
<li><code>param_ranges</code>: named parameters and for each of them the list of values to be used to generate cases. For each combination of values (a cartesian product is made) the parameters will be passed to the underlying function so they should have names the underlying function can handle. </li>
</ul>
<h3 id="multiplestepscasedata-type-hint"><code>MultipleStepsCaseData</code> type hint<a class="headerlink" href="#multiplestepscasedata-type-hint" title="Permanent link">&para;</a></h3>
<p>You may wish to use this type hint instead of <code>CaseData</code> when your case functions may return dictionaries of given/expected_normal/expected_error.</p>
<p><code>MultipleStepsCaseData = Tuple[Union[Given, Dict[Any, Given]],
                               Union[ExpectedNormal, Dict[Any, ExpectedNormal]],
                               Union[ExpectedError, Dict[Any, ExpectedError]]]</code></p>
<h2 id="2-on-test-functions-side">2 - On test functions side<a class="headerlink" href="#2-on-test-functions-side" title="Permanent link">&para;</a></h2>
<h3 id="cases_fixture"><code>@cases_fixture</code><a class="headerlink" href="#cases_fixture" title="Permanent link">&para;</a></h3>
<p><code>@cases_fixture(cases=None, module=None, case_data_argname='case_data', has_tag=None, filter=None)</code></p>
<p>Decorates a function so that it becomes a parametrized fixture.</p>
<p>The fixture will be automatically parametrized with all cases listed in module <code>module</code>, or with
all cases listed explicitly in <code>cases</code>.</p>
<p>Using it with a non-None <code>module</code> argument is equivalent to
 * extracting all cases from <code>module</code>
 * then decorating your function with @pytest.fixture(params=cases) with all the cases</p>
<p>So</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">cases_fixture</span><span class="p">,</span> <span class="n">CaseData</span>

<span class="c1"># import the module containing the test cases</span>
<span class="kn">import</span> <span class="nn">test_foo_cases</span>

<span class="nd">@cases_fixture</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="n">test_foo_cases</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foo_fixture</span><span class="p">(</span><span class="n">case_data</span><span class="p">:</span> <span class="n">CaseData</span><span class="p">):</span>
    <span class="o">...</span>
</code></pre></div>


<p>is equivalent to:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">get_all_cases</span><span class="p">,</span> <span class="n">get_pytest_parametrize_args</span>

<span class="c1"># import the module containing the test cases</span>
<span class="kn">import</span> <span class="nn">test_foo_cases</span>

<span class="c1"># manually list the available cases</span>
<span class="n">cases</span> <span class="o">=</span> <span class="n">get_all_cases</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="n">test_foo_cases</span><span class="p">)</span>

<span class="c1"># transform into required arguments for pytest (applying the pytest marks if needed)</span>
<span class="n">marked_cases</span><span class="p">,</span> <span class="n">cases_ids</span> <span class="o">=</span> <span class="n">get_pytest_parametrize_args</span><span class="p">(</span><span class="n">cases</span><span class="p">)</span>

<span class="c1"># parametrize the fixture manually</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="n">marked_cases</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="n">cases_ids</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foo_fixture</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">case_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span>  <span class="c1"># type: CaseData</span>
    <span class="o">...</span>
</code></pre></div>


<p><strong>Parameters</strong></p>
<ul>
<li><code>case_data_argname</code>: the optional name of the function parameter that should receive the <code>CaseDataGetter</code> object. Default is <code>case_data</code>.</li>
<li>Other parameters (cases, module, has_tag, filter) can be used to perform explicit listing, or filtering, of cases to include. See <code>get_all_cases()</code> for details about them.</li>
</ul>
<h3 id="cases_data"><code>@cases_data</code><a class="headerlink" href="#cases_data" title="Permanent link">&para;</a></h3>
<p><code>@cases_data(cases=None, module=None, case_data_argname='case_data', has_tag=None, filter=None)</code></p>
<p>Decorates a test function so as to automatically parametrize it with all cases listed in module <code>module</code>, or with all cases listed explicitly in <code>cases</code>.</p>
<p>Using it with a non-None <code>module</code> argument is equivalent to</p>
<ul>
<li>extracting all cases from <code>module</code></li>
<li>then decorating your function with <code>@pytest.mark.parametrize</code> with all the cases</li>
</ul>
<p>So</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">cases_data</span>

<span class="c1"># import the module containing the test cases</span>
<span class="kn">import</span> <span class="nn">test_foo_cases</span>

<span class="nd">@cases_data</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="n">test_foo_cases</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">case_data</span><span class="p">):</span>
    <span class="o">...</span>
</code></pre></div>


<p>is equivalent to:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">get_all_cases</span><span class="p">,</span> <span class="n">get_pytest_parametrize_args</span>

<span class="c1"># import the module containing the test cases</span>
<span class="kn">import</span> <span class="nn">test_foo_cases</span>

<span class="c1"># manually list the available cases</span>
<span class="n">cases</span> <span class="o">=</span> <span class="n">get_all_cases</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="n">test_foo_cases</span><span class="p">)</span>

<span class="c1"># transform into required arguments for pytest (applying the pytest marks if needed)</span>
<span class="n">marked_cases</span><span class="p">,</span> <span class="n">cases_ids</span> <span class="o">=</span> <span class="n">get_pytest_parametrize_args</span><span class="p">(</span><span class="n">cases</span><span class="p">)</span>

<span class="c1"># parametrize the test function manually</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s1">&#39;case_data&#39;</span><span class="p">,</span> <span class="n">marked_cases</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">case_data</span><span class="p">):</span>
    <span class="o">...</span>
</code></pre></div>


<p><strong>Parameters</strong></p>
<ul>
<li><code>case_data_argname</code>: the optional name of the function parameter that should receive the <code>CaseDataGetter</code> object. Default is <code>case_data</code>.</li>
<li>Other parameters (cases, module, has_tag, filter) can be used to perform explicit listing, or filtering, of cases to include. See <code>get_all_cases()</code> for details about them.</li>
</ul>
<h3 id="casedatagetter"><code>CaseDataGetter</code><a class="headerlink" href="#casedatagetter" title="Permanent link">&para;</a></h3>
<p>A proxy for a test case. Instances of this class are created by <code>@cases_data</code> or <code>get_all_cases</code>. It provides a single method:</p>
<p><code>get(self, *args, **kwargs) -&gt; Union[CaseData, Any]</code></p>
<p>This method calls the actual underlying case function with arguments propagation, and returns the result. The case functions can use the proposed standard <code>CaseData</code> type hint and return outputs matching this type hint, but this is not mandatory.</p>
<h3 id="unfold_expected_err"><code>unfold_expected_err</code><a class="headerlink" href="#unfold_expected_err" title="Permanent link">&para;</a></h3>
<p>'Unfolds' the expected error <code>expected_e</code> to return a tuple of</p>
<ul>
<li>expected error type</li>
<li>expected error instance</li>
<li>error validation callable</li>
</ul>
<p>If <code>expected_e</code> is an exception type, returns <code>expected_e, None, None</code>.
If <code>expected_e</code> is an exception instance, returns <code>type(expected_e), expected_e, None</code>.
If <code>expected_e</code> is an exception validation function, returns <code>Exception, None, expected_e</code>.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>expected_e</code>: an <code>ExpectedError</code>, that is, either an exception type, an exception instance, or an exception validation function</li>
</ul>
<h3 id="get_all_cases"><code>get_all_cases</code><a class="headerlink" href="#get_all_cases" title="Permanent link">&para;</a></h3>
<p><code>get_all_cases(cases=None, module=None, this_module_object=None, has_tag=None, filter=None) -&gt; List[CaseDataGetter]</code></p>
<p>Lists all desired cases for a given user query. This function may be convenient for debugging purposes.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>cases</code>: a single case or a hardcoded list of cases to use. Only one of <code>cases</code> and <code>module</code> should be set.</li>
<li><code>module</code>: a module or a hardcoded list of modules to use. You may use <code>THIS_MODULE</code> to indicate that the module is the current one. Only one of <code>cases</code> and <code>module</code> should be set.</li>
<li><code>this_module_object</code>: any variable defined in the module of interest, for example a function. It is used to find "this module", when <code>module</code> contains <code>THIS_MODULE</code>. </li>
<li><code>has_tag</code>: an optional tag used to filter the cases in the <code>module</code>. Only cases with the given tag will be selected.</li>
<li><code>filter</code>: an optional filtering function taking as an input a list of tags associated with a case, and returning a boolean indicating if the case should be selected. It will be used to filter the cases in the <code>module</code>. It both <code>has_tag</code> and <code>filter</code> are set, both will be applied in sequence.</li>
</ul>
<h2 id="3-pytest-goodies">3 - Pytest goodies<a class="headerlink" href="#3-pytest-goodies" title="Permanent link">&para;</a></h2>
<h3 id="fixture_plus"><code>@fixture_plus</code><a class="headerlink" href="#fixture_plus" title="Permanent link">&para;</a></h3>
<p><code>fixture_plus(scope="function", autouse=False, name=None, unpack_into=None, **kwargs)</code></p>
<p>Identical to <code>@pytest.fixture</code> decorator, except that </p>
<ul>
<li>
<p>it supports multi-parametrization with <code>@pytest.mark.parametrize</code> as requested in <a href="https://github.com/pytest-dev/pytest/issues/3960">pytest#3960</a>. As a consequence it does not support the <code>params</code> and <code>ids</code> arguments anymore.</p>
</li>
<li>
<p>it supports a new argument <code>unpack_into</code> where you can provide names for fixtures where to unpack this fixture into.</p>
</li>
</ul>
<p>As a consequence it does not support the <code>params</code> and <code>ids</code> arguments anymore.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><strong>scope</strong>: the scope for which this fixture is shared, one of "function" (default), "class", "module" or "session".</li>
<li><strong>autouse</strong>: if True, the fixture func is activated for all tests that can see it.  If False (the default) then an explicitreference is needed to activate the fixture.</li>
<li><strong>name</strong>: the name of the fixture. This defaults to the name of the decorated function. Note: If a fixture is used in the same module in which it is defined, the function name of the fixture will be shadowed by the function arg that requests the fixture; one wayto resolve this is to name the decorated function <code>fixture_&lt;fixturename&gt;</code> and then use <code>@pytest.fixture(name='&lt;fixturename&gt;')</code>.</li>
<li><strong>unpack_into</strong>: an optional iterable of names, or string containing coma-separated names, for additional fixtures to create to represent parts of this fixture. See <code>unpack_fixture</code> for details.</li>
<li><strong>kwargs</strong>: other keyword arguments for <code>@pytest.fixture</code></li>
</ul>
<h3 id="unpack_fixture"><code>unpack_fixture</code><a class="headerlink" href="#unpack_fixture" title="Permanent link">&para;</a></h3>
<p><code>unpack_fixture(argnames, fixture) -&gt; Tuple[&lt;Fixture&gt;]</code></p>
<p>Creates several fixtures with names <code>argnames</code> from the source <code>fixture</code>. Created fixtures will correspond to elements unpacked from <code>fixture</code> in order. For example if <code>fixture</code> is a tuple of length 2, <code>argnames="a,b"</code> will create two fixtures containing the first and second element respectively.</p>
<p>The created fixtures are automatically registered into the callers' module, but you may wish to assign them to variables for convenience. In that case make sure that you use the same names, e.g. <code>a, b = unpack_fixture('a,b', 'c')</code>.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><strong>argnames</strong>: same as <code>@pytest.mark.parametrize</code> <code>argnames</code>.</li>
<li><strong>fixture</strong>: a fixture name string or a fixture symbol. If a fixture symbol is provided, the created fixtures will have the same scope. If a name is provided, they will have scope='function'. Note that in practice the performance loss resulting from using <code>function</code> rather than a higher scope is negligible since the created fixtures' body is a one-liner.</li>
</ul>
<p><strong>Outputs:</strong> the created fixtures.</p>
<h3 id="fixture_union"><code>fixture_union</code><a class="headerlink" href="#fixture_union" title="Permanent link">&para;</a></h3>
<p><code>fixture_union(name, fixtures, scope="function", idstyle='explicit',
               ids=fixture_alternative_to_str, autouse=False, unpack_into=None, **kwargs)
               -&gt; &lt;Fixture&gt;</code></p>
<p>Creates a fixture that will take all values of the provided fixtures in order. That fixture is automatically registered into the callers' module, but you may wish to assign it to a variable for convenience. In that case make sure that you use the same name, e.g. <code>a = fixture_union('a', ['b', 'c'])</code></p>
<p>The style of test ids corresponding to the union alternatives can be changed with <code>idstyle</code>. Three values are allowed:</p>
<ul>
<li><code>'explicit'</code> (default) favors readability,</li>
<li><code>'compact'</code> adds a small mark so that at least one sees which parameters are union parameters and which others are normal parameters,</li>
<li><code>None</code> does not change the ids.    </li>
</ul>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>name</code>: the name of the fixture to create</li>
<li><code>fixtures</code>: an array-like containing fixture names and/or fixture symbols</li>
<li><code>scope</code>: the scope of the union. Since the union depends on the sub-fixtures, it should be smaller than the smallest scope of fixtures referenced.</li>
<li><code>idstyle</code>: The style of test ids corresponding to the union alternatives. One of <code>'explicit'</code> (default), <code>'compact'</code>, or <code>None</code>.</li>
<li><code>unpack_into</code>: an optional iterable of names, or string containing coma-separated names, for additional fixtures to create to represent parts of this fixture. See <code>unpack_fixture</code> for details.</li>
<li><code>ids</code>: as in pytest. The default value returns the correct fixture</li>
<li><code>autouse</code>: as in pytest</li>
<li><code>kwargs</code>: other pytest fixture options. They might not be supported correctly.</li>
</ul>
<p><strong>Outputs:</strong> the new fixture. Note: you do not need to capture that output in a symbol, since the fixture is automatically registered in your module. However if you decide to do so make sure that you use the same name.</p>
<h3 id="param_fixtures"><code>param_fixtures</code><a class="headerlink" href="#param_fixtures" title="Permanent link">&para;</a></h3>
<p><code>param_fixtures(argnames, argvalues, autouse=False, ids=None, scope="function", **kwargs) -&gt; Tuple[&lt;Fixture&gt;]</code></p>
<p>Creates one or several "parameters" fixtures - depending on the number or coma-separated names in <code>argnames</code>. The created fixtures are automatically registered into the callers' module, but you may wish to assign them to variables for convenience. In that case make sure that you use the same names, e.g. <code>p, q = param_fixtures('p,q', [(0, 1), (2, 3)])</code>.</p>
<p>Note that the <code>(argnames, argvalues, ids)</code> signature is similar to <code>@pytest.mark.parametrize</code> for consistency, see https://docs.pytest.org/en/latest/reference.html?highlight=pytest.param#pytest-mark-parametrize</p>
<h3 id="param_fixture"><code>param_fixture</code><a class="headerlink" href="#param_fixture" title="Permanent link">&para;</a></h3>
<p><code>param_fixture(argname, argvalues, autouse=False, ids=None, scope="function", **kwargs) -&gt; &lt;Fixture&gt;</code></p>
<p>Identical to <code>param_fixtures</code> but for a single parameter name, so that you can assign its output to a single variable.</p>
<h3 id="parametrize_plus"><code>@parametrize_plus</code><a class="headerlink" href="#parametrize_plus" title="Permanent link">&para;</a></h3>
<p><code>parametrize_plus(argnames, argvalues, indirect=False, ids=None, scope=None, **kwargs)</code></p>
<p>Equivalent to <code>@pytest.mark.parametrize</code> but also supports the fact that in argvalues one can include references to fixtures with <code>fixture_ref(&lt;fixture&gt;)</code> where <fixture> can be the fixture name or fixture function.</p>
<p>When such a fixture reference is detected in the argvalues, a new function-scope fixture will be created with a unique name, and the test function will be wrapped so as to be injected with the correct parameters. Special test ids will be created to illustrate the switching between normal parameters and fixtures.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../usage/advanced/" title="Advanced" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Advanced
              </span>
            </div>
          </a>
        
        
          <a href="../changelog/" title="Changelog" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Changelog
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>