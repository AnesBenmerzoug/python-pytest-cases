



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.0">
    
    
      
        <title>Intermediate - pytest_cases</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.982221ab.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#intermediate-usage" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="pytest_cases" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              pytest_cases
            </span>
            <span class="md-header-nav__topic">
              Intermediate
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/smarie/python-pytest-cases/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="pytest_cases" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    pytest_cases
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/smarie/python-pytest-cases/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Usage details
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Usage details
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../basics/" title="Basics" class="md-nav__link">
      Basics
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Intermediate
      </label>
    
    <a href="./" title="Intermediate" class="md-nav__link md-nav__link--active">
      Intermediate
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#gathering-cases-from-different-files" title="Gathering Cases from different files" class="md-nav__link">
    Gathering Cases from different files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storing-cases-with-different-purposes-in-the-same-file" title="Storing Cases with different purposes in the same file" class="md-nav__link">
    Storing Cases with different purposes in the same file
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-hardcoded-cases-list" title="a- Hardcoded cases list" class="md-nav__link">
    a- Hardcoded cases list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-simple-declare-a-test-target" title="b- Simple: declare a test target" class="md-nav__link">
    b- Simple: declare a test target
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-advanced-tagging-filtering" title="c- Advanced: Tagging &amp; Filtering" class="md-nav__link">
    c- Advanced: Tagging &amp; Filtering
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#to-go-further" title="To go further" class="md-nav__link">
    To go further
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../advanced/" title="Advanced" class="md-nav__link">
      Advanced
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../api_reference/" title="API reference" class="md-nav__link">
      API reference
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#gathering-cases-from-different-files" title="Gathering Cases from different files" class="md-nav__link">
    Gathering Cases from different files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storing-cases-with-different-purposes-in-the-same-file" title="Storing Cases with different purposes in the same file" class="md-nav__link">
    Storing Cases with different purposes in the same file
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-hardcoded-cases-list" title="a- Hardcoded cases list" class="md-nav__link">
    a- Hardcoded cases list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-simple-declare-a-test-target" title="b- Simple: declare a test target" class="md-nav__link">
    b- Simple: declare a test target
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-advanced-tagging-filtering" title="c- Advanced: Tagging &amp; Filtering" class="md-nav__link">
    c- Advanced: Tagging &amp; Filtering
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#to-go-further" title="To go further" class="md-nav__link">
    To go further
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/smarie/python-pytest-cases/edit/master/docs/usage/intermediate.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="intermediate-usage">Intermediate Usage<a class="headerlink" href="#intermediate-usage" title="Permanent link">&para;</a></h1>
<p>You might feel a bit stuck when using only the basics. In particular you might feel frustrated by having to put all cases for the same function in the same dedicated file.</p>
<p>In this section we see that this is not mandatory at all: <code>pytest-cases</code> offers flexibility mechanisms to organize the files the way you wish.</p>
<h2 id="gathering-cases-from-different-files">Gathering Cases from different files<a class="headerlink" href="#gathering-cases-from-different-files" title="Permanent link">&para;</a></h2>
<p>You can gather cases from different files (modules) in the same test function:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">CaseDataGetter</span><span class="p">,</span> <span class="n">cases_data</span>

<span class="c1"># the 2 modules containing cases</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">shared_cases</span><span class="p">,</span> <span class="n">shared_cases2</span>

<span class="nd">@cases_data</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="p">[</span><span class="n">shared_cases</span><span class="p">,</span> <span class="n">shared_cases2</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">test_bar</span><span class="p">(</span><span class="n">case_data</span><span class="p">:</span> <span class="n">CaseDataGetter</span><span class="p">):</span>   
    <span class="c1"># 1- Grab the test case data</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">expected_o</span><span class="p">,</span> <span class="n">expected_e</span> <span class="o">=</span> <span class="n">case_data</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

    <span class="c1"># 2- Use it: nominal test only</span>
    <span class="c1"># ...</span>
</pre></div>


<h2 id="storing-cases-with-different-purposes-in-the-same-file">Storing Cases with different purposes in the same file<a class="headerlink" href="#storing-cases-with-different-purposes-in-the-same-file" title="Permanent link">&para;</a></h2>
<p>This is the opposite of the above: sometimes it would just be tideous to create a <strong>dedicated</strong> cases file for every single test function, you just want to be able to put all of your cases in the same place, even if they are not used in the same test.</p>
<p>To do this we need to <strong>associate test functions with test cases</strong> in a more fine-grain way.</p>
<h3 id="a-hardcoded-cases-list">a- Hardcoded cases list<a class="headerlink" href="#a-hardcoded-cases-list" title="Permanent link">&para;</a></h3>
<p>On the test functions side, you can precisely select the required cases in <code>@cases_data</code> using <code>cases=&lt;case or list of cases&gt;</code></p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">CaseDataGetter</span><span class="p">,</span> <span class="n">cases_data</span>

<span class="c1"># the module containing the cases above</span>
<span class="kn">from</span> <span class="nn">.shared_cases</span> <span class="kn">import</span> <span class="n">case1</span><span class="p">,</span> <span class="n">case2</span><span class="p">,</span> <span class="n">case3</span>

<span class="c1"># the 2 functions that we want to test</span>
<span class="kn">from</span> <span class="nn">mycode</span> <span class="kn">import</span> <span class="n">foo</span><span class="p">,</span> <span class="n">bar</span>

<span class="nd">@cases_data</span><span class="p">(</span><span class="n">cases</span><span class="o">=</span><span class="p">[</span><span class="n">case1</span><span class="p">,</span> <span class="n">case2</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">case_data</span><span class="p">:</span> <span class="n">CaseDataGetter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This test will only be executed on cases tagged with &#39;foo&#39;&quot;&quot;&quot;</span>

    <span class="c1"># 1- Grab the test case data</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">expected_o</span><span class="p">,</span> <span class="n">expected_e</span> <span class="o">=</span> <span class="n">case_data</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

    <span class="c1"># 2- Use it: nominal test only</span>
    <span class="k">assert</span> <span class="n">expected_e</span> <span class="ow">is</span> <span class="bp">None</span>
    <span class="n">outs</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="o">**</span><span class="n">i</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">outs</span> <span class="o">==</span> <span class="n">expected_o</span>

<span class="nd">@cases_data</span><span class="p">(</span><span class="n">cases</span><span class="o">=</span><span class="n">case3</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_bar</span><span class="p">(</span><span class="n">case_data</span><span class="p">:</span> <span class="n">CaseDataGetter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This test will only be executed on cases tagged with &#39;bar&#39;&quot;&quot;&quot;</span>

    <span class="c1"># 1- Grab the test case data</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">expected_o</span><span class="p">,</span> <span class="n">expected_e</span> <span class="o">=</span> <span class="n">case_data</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

    <span class="c1"># 2- Use it: nominal test only</span>
    <span class="k">assert</span> <span class="n">expected_e</span> <span class="ow">is</span> <span class="bp">None</span>
    <span class="n">outs</span> <span class="o">=</span> <span class="n">bar</span><span class="p">(</span><span class="o">**</span><span class="n">i</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">outs</span> <span class="o">==</span> <span class="n">expected_o</span>
</pre></div>


<p>In the example above, <code>test_foo</code> will be applied on <code>case1</code> and <code>case2</code>, while <code>test_bar</code> will be applied on <code>case3</code>. They can live in the same file or not, it does not matter.</p>
<h3 id="b-simple-declare-a-test-target">b- Simple: declare a test target<a class="headerlink" href="#b-simple-declare-a-test-target" title="Permanent link">&para;</a></h3>
<p>The simplest non-hardcoded approach is to use a common reference so that each test function finds the appropriate cases. The function or class under test (in other words, the "test target") might be a good idea to serve this purpose. </p>
<p>On the cases side, simply use the <code>@test_target</code> decorator:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">CaseData</span><span class="p">,</span> <span class="n">test_target</span>

<span class="c1"># the 2 functions that we want to test</span>
<span class="kn">from</span> <span class="nn">mycode</span> <span class="kn">import</span> <span class="n">foo</span><span class="p">,</span> <span class="n">bar</span>

<span class="c1"># a case only to be used when function foo is under test</span>
<span class="nd">@test_target</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">case_foo_simple</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">CaseData</span><span class="p">:</span>
    <span class="n">ins</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">outs</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>
    <span class="k">return</span> <span class="n">ins</span><span class="p">,</span> <span class="n">outs</span><span class="p">,</span> <span class="bp">None</span>

<span class="c1"># a case only to be used when function bar is under test</span>
<span class="nd">@test_target</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">case_bar_simple</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">CaseData</span><span class="p">:</span>
    <span class="n">ins</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">outs</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>
    <span class="k">return</span> <span class="n">ins</span><span class="p">,</span> <span class="n">outs</span><span class="p">,</span> <span class="bp">None</span>
</pre></div>


<p>On the test functions side, filter the cases in <code>@cases_data</code> using <code>has_tag=&lt;target&gt;</code>:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">CaseDataGetter</span><span class="p">,</span> <span class="n">cases_data</span>

<span class="c1"># the module containing the cases above</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">shared_cases</span>

<span class="c1"># the 2 functions that we want to test</span>
<span class="kn">from</span> <span class="nn">mycode</span> <span class="kn">import</span> <span class="n">foo</span><span class="p">,</span> <span class="n">bar</span>

<span class="nd">@cases_data</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="n">shared_cases</span><span class="p">,</span> <span class="n">has_tag</span><span class="o">=</span><span class="n">foo</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">case_data</span><span class="p">:</span> <span class="n">CaseDataGetter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This test will only be executed on cases tagged with &#39;foo&#39;&quot;&quot;&quot;</span>

    <span class="c1"># 1- Grab the test case data</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">expected_o</span><span class="p">,</span> <span class="n">expected_e</span> <span class="o">=</span> <span class="n">case_data</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

    <span class="c1"># 2- Use it: nominal test only</span>
    <span class="k">assert</span> <span class="n">expected_e</span> <span class="ow">is</span> <span class="bp">None</span>
    <span class="n">outs</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="o">**</span><span class="n">i</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">outs</span> <span class="o">==</span> <span class="n">expected_o</span>


<span class="nd">@cases_data</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="n">shared_cases</span><span class="p">,</span> <span class="n">has_tag</span><span class="o">=</span><span class="n">bar</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_bar</span><span class="p">(</span><span class="n">case_data</span><span class="p">:</span> <span class="n">CaseDataGetter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This test will only be executed on cases tagged with &#39;bar&#39;&quot;&quot;&quot;</span>

    <span class="c1"># 1- Grab the test case data</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">expected_o</span><span class="p">,</span> <span class="n">expected_e</span> <span class="o">=</span> <span class="n">case_data</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

    <span class="c1"># 2- Use it: nominal test only</span>
    <span class="k">assert</span> <span class="n">expected_e</span> <span class="ow">is</span> <span class="bp">None</span>
    <span class="n">outs</span> <span class="o">=</span> <span class="n">bar</span><span class="p">(</span><span class="o">**</span><span class="n">i</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">outs</span> <span class="o">==</span> <span class="n">expected_o</span>
</pre></div>


<p>Of course this does not prevent other test functions to use all cases by not using any filter.</p>
<h3 id="c-advanced-tagging-filtering">c- Advanced: Tagging &amp; Filtering<a class="headerlink" href="#c-advanced-tagging-filtering" title="Permanent link">&para;</a></h3>
<p>The above example is just a particular case of <strong>tag</strong> put on a case, and <strong>filter</strong> put on the test function. You can actually put <strong>several</strong> tags on the cases, not only a single one (like <code>@test_target</code> does):</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">CaseData</span><span class="p">,</span> <span class="n">case_tags</span>

<span class="c1"># a case with two tags</span>
<span class="nd">@case_tags</span><span class="p">(</span><span class="n">bar</span><span class="p">,</span> <span class="s1">&#39;fast&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">case_multitag_simple</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">CaseData</span><span class="p">:</span>
    <span class="n">ins</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">outs</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>
    <span class="k">return</span> <span class="n">ins</span><span class="p">,</span> <span class="n">outs</span><span class="p">,</span> <span class="bp">None</span>
</pre></div>


<p>Test functions can use two things to perform their selection:</p>
<ul>
<li>the <code>has_tag</code> parameter, has seen above</li>
<li>the <code>filter</code> parameter, that should be a callable taking as input a list of tags and returning a boolean.</li>
</ul>
<p>If both are provided, a AND will be applied.</p>
<p>For example:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">THIS_MODULE</span><span class="p">,</span> <span class="n">cases_data</span><span class="p">,</span> <span class="n">CaseDataGetter</span>

<span class="k">def</span> <span class="nf">has_a_or_b</span><span class="p">(</span><span class="n">tags</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">tags</span> <span class="ow">or</span> <span class="s1">&#39;b&#39;</span> <span class="ow">in</span> <span class="n">tags</span>

<span class="nd">@cases_data</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="n">THIS_MODULE</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">has_a_or_b</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_with_cases_a_or_b</span><span class="p">(</span><span class="n">case_data</span><span class="p">:</span> <span class="n">CaseDataGetter</span><span class="p">):</span>
    <span class="c1"># ...</span>
</pre></div>


<p>Or with a lambda function:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">THIS_MODULE</span><span class="p">,</span> <span class="n">cases_data</span><span class="p">,</span> <span class="n">CaseDataGetter</span>

<span class="nd">@cases_data</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="n">THIS_MODULE</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">tags</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">tags</span> <span class="ow">or</span> <span class="s1">&#39;b&#39;</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_with_cases_a_or_b</span><span class="p">(</span><span class="n">case_data</span><span class="p">:</span> <span class="n">CaseDataGetter</span><span class="p">):</span>
    <span class="c1"># ...</span>
</pre></div>


<p>Or with a mini lambda expression:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">pytest_cases</span> <span class="kn">import</span> <span class="n">THIS_MODULE</span><span class="p">,</span> <span class="n">cases_data</span><span class="p">,</span> <span class="n">CaseDataGetter</span>

<span class="kn">from</span> <span class="nn">mini_lambda</span> <span class="kn">import</span> <span class="n">InputVar</span><span class="p">,</span> <span class="n">_</span>
<span class="n">tags</span> <span class="o">=</span> <span class="n">InputVar</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>

<span class="nd">@cases_data</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="n">THIS_MODULE</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="n">tags</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="o">|</span> <span class="n">tags</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)))</span>
<span class="k">def</span> <span class="nf">test_with_cases_a_or_b</span><span class="p">(</span><span class="n">case_data</span><span class="p">:</span> <span class="n">CaseDataGetter</span><span class="p">):</span>
    <span class="c1"># ...</span>
</pre></div>


<h2 id="to-go-further">To go further<a class="headerlink" href="#to-go-further" title="Permanent link">&para;</a></h2>
<p>Are you at ease with the above concepts ? It's time to move to the <a href="../advanced/">advanced</a> section!</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../basics/" title="Basics" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Basics
              </span>
            </div>
          </a>
        
        
          <a href="../advanced/" title="Advanced" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Advanced
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.2ba8dec4.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>